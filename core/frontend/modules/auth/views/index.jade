//-
  Copyright © 2015 Luis Sieira Garcia

  This file is part of Planète.

      Planète is free software: you can redistribute it and/or modify
      it under the terms of the GNU Affero General Public License as published by
      the Free Software Foundation, either version 3 of the License, or
      (at your option) any later version.

      Planète is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU Affero General Public License for more details.

      You should have received a copy of the GNU Affero General Public License
      along with along with planète.  If not, see <http://www.gnu.org/licenses/>.  If not, see <http://www.gnu.org/licenses/>
-//

include ../../../views/utils
+moduleScripts(scripts)

#login-modal(ng-app = 'auth', ng-controller = 'loginController')
  .modal-header
    h3 #{__('You are not authorized to acess this ressource')}
  .modal-body
    .alert.alert-danger(ng-show="error")
      .container
        i.fa.fa-exclamation-triangle
        |  {{error}}
    | #{__('Please, log in')}
    hr
    form(name='form' role='form' novalidate)
      .form-group(ng-class="{'has-error': form.username.$touched && form.username.$invalid}")
        label(for='username') #{__('User name')}
        input(ng-model='credentials.username' type='text' class='form-control' name='username', id='username' required)
      .form-group(ng-class="{'has-error': form.password.$touched && form.password.$invalid}")
        label(for='password') #{__('User password')}
        input(ng-model='credentials.password' type='password' class='form-control' name='password' id='password' required)
  .modal-footer
    button.btn.btn-primary(ng-disabled='!form.$valid', ng-click='form.$valid && login(credentials)') #{__('OK')}
    |     
    button.btn(ng-click='cancel()') #{__('Nah !')}
